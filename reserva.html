<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Reservas ¬∑ The Pets Lovers</title>
  <meta name="description" content="Reserva guarder√≠a, alojamiento, paseos, visitas a domicilio, ex√≥ticos y transporte. Solo pagas una parte ahora; el resto 12 d√≠as antes.">

  <!-- Forzar https+www can√≥nico (igual a candidaturas) -->
  <script>
    (function(){
      var wantHost = 'www.thepetslovers.es';
      if (location.protocol !== 'https:' || location.host !== wantHost) {
        var target = 'https://' + wantHost + location.pathname + location.search + location.hash;
        location.replace(target);
      }
    })();
  </script>

  <!-- SEO can√≥nico + OG/Twitter -->
  <link rel="canonical" href="https://www.thepetslovers.es/reservas.html">
  <meta name="robots" content="index,follow">
  <meta property="og:title" content="Reservas ¬∑ The Pets Lovers">
  <meta property="og:description" content="Elige tu servicio para tu mascota y reserva: solo pagas una parte ahora; el resto 12 d√≠as antes.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.thepetslovers.es/reservas.html">
  <meta property="og:image" content="https://www.thepetslovers.es/images/og-petslovers.jpg">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Reservas ¬∑ The Pets Lovers">
  <meta name="twitter:description" content="Reserva guarder√≠a, alojamiento, paseos, visitas a domicilio, ex√≥ticos y transporte.">
  <meta name="twitter:image" content="https://www.thepetslovers.es/images/og-petslovers.jpg">

  <!-- JSON-LD Organization + ReservationPage -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"Organization",
    "name":"The Pets Lovers",
    "url":"https://www.thepetslovers.es",
    "logo":"https://www.thepetslovers.es/images/logo.png.png",
    "sameAs":["https://www.instagram.com/guarderiamascotasthepetslovers"]
  }
  </script>
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"ReservationPage",
    "name":"Reservas ¬∑ The Pets Lovers",
    "description":"Reserva servicios de cuidado de mascotas."
  }
  </script>

  <!-- Estilos globales del sitio -->
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Poppins:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

  <!-- Estilos scoped de Reservas (clonado del patr√≥n candidaturas) -->
  <link rel="stylesheet" href="assets/css/reservas.css">
</head>
<body>

  <!-- Navbar (igual a candidaturas) -->
  <div id="tpl-navbar">
    <noscript>
      <nav class="navbar">
        <div class="logo"><a href="index.html"><img src="images/logo.png.png" alt="The Pets Lovers"></a></div>
        <a href="index.html" class="home-button">Inicio</a>
        <ul class="nav-links">
          <li><a href="como-funciona.html">C√≥mo funciona</a></li>
          <li><a href="servicios.html">Servicios</a></li>
          <li><a href="trabaja-con-nosotros.html">Trabaja con nosotros</a></li>
          <li><a href="ayuda.html">¬øNecesitas ayuda?</a></li>
        </ul>
        <a class="login-button" href="#iniciar-sesion">Iniciar sesi√≥n</a>
      </nav>
    </noscript>
  </div>

  <main class="container tpl-page">
    <section class="tpl-form" aria-labelledby="r-title">
      <p class="tpl-badge"><i class="fa-solid fa-paw"></i> Reservas de servicios</p>
      <h1 id="r-title">üêæ RESERVA TU SERVICIO ‚Äì THE PETS LOVERS</h1>
      <p class="tpl-lead">
        Selecciona servicio y fechas ‚Üí mascotas ‚Üí datos del titular ‚Üí desglose ‚Üí reservar. Solo abonas una parte ahora; el resto 12 d√≠as antes del inicio.
      </p>

      <!-- Auth wall (sin redirigir, como pediste) -->
      <section id="authWall" class="auth-wall" style="display:none" aria-live="polite">
        <p><strong>Inicia sesi√≥n o crea tu cuenta</strong> para reservar.</p>
        <div class="tpl-actions">
          <button class="cta-button" id="btnLogin">Iniciar sesi√≥n</button>
          <button class="cta-button ghost" id="btnRegister">Crear cuenta</button>
        </div>
      </section>

      <!-- Formulario de reservas -->
      <form id="tpl-form-reservas" novalidate data-redirect="perfil.html">
        <!-- 1) Datos del servicio -->
        <fieldset class="tpl-fieldset">
          <legend>üß© DATOS DEL SERVICIO</legend>
          <div class="tpl-grid">
            <div class="tpl-field">
              <label for="service" class="tpl-required">Servicio</label>
              <select id="service" name="service" required>
                <option value="">Selecciona</option>
                <option value="daycare">Guarder√≠a de d√≠a</option>
                <option value="overnight">Alojamiento nocturno</option>
                <option value="walk60">Paseo (60‚Äô)</option>
                <option value="visita_gato">Visita a domicilio (gato)</option>
                <option value="exoticos">Ex√≥ticos (visitas)</option>
                <option value="transporte">Transporte</option>
              </select>
              <small class="tpl-help">Si vienes desde una ficha, lo preseleccionamos.</small>
            </div>

            <div class="tpl-field">
              <label for="startDate" class="tpl-required">Fecha inicio</label>
              <input id="startDate" type="date" required>
            </div>
            <div class="tpl-field">
              <label for="endDate" class="tpl-required">Fecha fin</label>
              <input id="endDate" type="date" required>
            </div>

            <div class="tpl-field">
              <label for="startTime">Hora inicio</label>
              <input id="startTime" type="time">
            </div>
            <div class="tpl-field">
              <label for="endTime">Hora fin</label>
              <input id="endTime" type="time">
            </div>

            <!-- Especie / subtipo condicional -->
            <div class="tpl-field" id="speciesField" hidden>
              <label for="species">Especie</label>
              <input id="species" placeholder="Gato (auto en Visitas)" readonly>
            </div>
            <div class="tpl-field" id="exoSubtypeField" hidden>
              <label for="exoticosSubtype">Tipo (ex√≥ticos)</label>
              <select id="exoticosSubtype">
                <option value="aves">Aves</option>
                <option value="reptiles">Reptiles</option>
                <option value="pequenos_mamiferos">Peque√±os mam√≠feros</option>
                <option value="otro">Otro</option>
              </select>
            </div>

            <!-- Controles din√°micos por servicio -->
            <div class="tpl-field tpl-full" id="svcInlineControls"></div>
          </div>
        </fieldset>

        <!-- 2) Mascotas -->
        <fieldset class="tpl-fieldset">
          <legend>üê∂ MASCOTAS</legend>
          <div id="petsList" class="tpl-grid"></div>
          <p class="tpl-help">Selecciona una o varias. Marcamos ‚ÄúCachorro ‚â§6m‚Äù autom√°ticamente.</p>
        </fieldset>

        <!-- 3) Titular -->
        <fieldset class="tpl-fieldset">
          <legend>üë§ DATOS DEL TITULAR</legend>
          <div class="tpl-grid">
            <div class="tpl-field">
              <label for="fullName" class="tpl-required">Nombre y apellidos</label>
              <input id="fullName" autocomplete="name" required>
            </div>
            <div class="tpl-field">
              <label for="phone" class="tpl-required">Tel√©fono</label>
              <input id="phone" type="tel" autocomplete="tel" required>
            </div>
            <div class="tpl-field">
              <label for="email" class="tpl-required">Email</label>
              <input id="email" type="email" autocomplete="email" required>
            </div>
            <div class="tpl-field">
              <label for="region" class="tpl-required">Comunidad Aut√≥noma</label>
              <select id="region" required>
                <option value="">Selecciona</option>
                <option>Andaluc√≠a</option><option>Arag√≥n</option><option>Asturias</option><option>Islas Baleares</option>
                <option>Islas Canarias</option><option>Cantabria</option><option>Castilla-La Mancha</option><option>Castilla y Le√≥n</option>
                <option>Catalu√±a</option><option>Comunidad Valenciana</option><option>Extremadura</option><option>Galicia</option>
                <option>La Rioja</option><option>Comunidad de Madrid</option><option>Regi√≥n de Murcia</option><option>Navarra</option>
                <option>Pa√≠s Vasco</option><option>Ceuta</option><option>Melilla</option>
              </select>
            </div>
            <div class="tpl-field">
              <label for="address">Direcci√≥n</label>
              <input id="address" autocomplete="street-address">
            </div>
            <div class="tpl-field">
              <label for="postalCode">C√≥digo Postal</label>
              <input id="postalCode" autocomplete="postal-code">
            </div>
            <div class="tpl-field tpl-full">
              <label for="observations">Observaciones</label>
              <textarea id="observations" rows="2" placeholder="Alergias, horarios, etc."></textarea>
            </div>
          </div>
        </fieldset>

        <!-- 4) Desglose -->
        <fieldset class="tpl-fieldset">
          <legend>üßÆ DESGLOSE</legend>
          <div class="summary-panel">
            <div class="summary-grid" id="summaryGrid"></div>
            <p class="tpl-note">Solo abonar√°s una parte ahora. El resto se pagar√° 12 d√≠as antes del inicio del servicio.</p>
          </div>
        </fieldset>

        <!-- CTA -->
        <div class="tpl-actions">
          <button type="button" class="cta-button ghost" id="btnBack">‚üµ Atr√°s</button>
          <button type="submit" class="cta-button" id="btnSubmit">Reservar ahora</button>
        </div>
      </form>
    </section>
  </main>

  <!-- Footer (igual a candidaturas) -->
  <div id="tpl-footer">
    <noscript>
      <footer class="site-footer"></footer>
    </noscript>
  </div>

  <!-- Firebase compat -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script>
    (function(){
      try{
        if (window.firebase && !firebase.apps.length){
          const cfg = {
            apiKey: "AIzaSyDW73aFuz2AFS9VeWg_linHIRJYN4YMgTk",
            authDomain: "thepetslovers-c1111.firebaseapp.com",
            projectId: "thepetslovers-c1111",
            storageBucket: "thepetslovers-c1111.appspot.com",
            messagingSenderId: "415914577533",
            appId: "1:415914577533:web:0b7a056ebaa4f1de28ab14",
            measurementId: "G-FXPD69KXBG"
          };
          firebase.initializeApp(cfg);
        }
      }catch(_){}
    })();
  </script>

  <!-- EmailJS -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <script>
    window.TPL_EMAILJS = {
      serviceId: "service_odjqrfl",
      publicKey:  "L2xAATfVuHJwj4EIV",
      templates: { cliente: "template_rao5n0c", gestion: "template_rao5n0c" },
      adminEmail: "gestion@thepetslovers.es"
    };
    try { emailjs.init(window.TPL_EMAILJS.publicKey); } catch(e) {}
  </script>

  <!-- Navbar/Footer (los tuyos) -->
  <script src="tpl-navbar.js" defer></script>
  <script src="tpl-footer.js" defer></script>

  <!-- L√≥gica de Reservas -->
  <script src="assets/js/tpl-auth.reservas.js" defer></script>
  <script src="assets/js/tpl-reservas.core.js" defer></script>
</body>
</html>
