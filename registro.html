<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Registro (datos del dueño) · The Pets Lovers</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Poppins:wght@400;700&display=swap" rel="stylesheet">
  <style>
    .tpl-form{ max-width:680px; margin:120px auto 60px; padding:20px; background:#fff; border:1px solid #eee; border-radius:12px; box-shadow:0 2px 12px rgba(0,0,0,.05);}
    .grid{ display:grid; gap:12px; grid-template-columns:1fr; }
    .field{ display:flex; flex-direction:column; gap:6px; }
    .field label{ font-weight:700; color:#58425a; }
    .field input,.field select{ border:1px solid #ddd; border-radius:10px; padding:10px; font:inherit; }
    @media(min-width:720px){ .grid{ grid-template-columns:1fr 1fr; } .wide{ grid-column:1 / -1; } }
    .actions{ display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; }
    .cta-button{ background:#339496; color:#fff; padding:10px 16px; border-radius:999px; border:none; cursor:pointer; font-weight:700; }
    .link{ background:#fff; color:#339496; border:2px solid #339496; }
  </style>
</head>
<body>
  <div id="tpl-navbar"></div>
  <script src="tpl-navbar.js" defer></script>

  <main class="tpl-form" aria-labelledby="t">
    <h1 id="t">Datos del dueño</h1>
    <p>Solo tardas 2 minutos. Después podrás añadir tus mascotas.</p>

    <!-- TPL: INICIO BLOQUE NUEVO [Formulario dueño] -->
    <form id="ownerForm">
      <div class="grid">
        <div class="field">
          <label for="nombre">Nombre y apellidos</label>
          <input id="nombre" required>
        </div>
        <div class="field">
          <label for="telefono">Teléfono</label>
          <input id="telefono" type="tel" required>
        </div>
        <div class="field wide">
          <label for="direccion">Dirección</label>
          <input id="direccion" placeholder="Calle y número" required>
        </div>
        <div class="field">
          <label for="cp">Código postal</label>
          <input id="cp" required>
        </div>
        <div class="field">
          <label for="ciudad">Ciudad</label>
          <input id="ciudad" required>
        </div>
        <div class="field">
          <label for="contacto">Preferencia de contacto</label>
          <select id="contacto" required>
            <option value="">Elige…</option>
            <option>WhatsApp</option>
            <option>Teléfono</option>
            <option>Email</option>
          </select>
        </div>
        <div class="field">
          <label for="zona">Zona de servicio</label>
          <input id="zona" placeholder="Barrio/municipio" required>
        </div>
        <div class="field wide">
          <label for="referencia">¿Cómo nos conociste? (opcional)</label>
          <input id="referencia" placeholder="Instagram, amigos, Google…">
        </div>
      </div>
      <div class="actions">
        <button class="cta-button" type="submit">Guardar y continuar</button>
        <a class="cta-button link" href="perfil.html">Omitir (lo completo después)</a>
      </div>
    </form>
    <!-- TPL: FIN BLOQUE NUEVO -->
  </main>

  <div id="tpl-footer"></div>
  <script src="tpl-footer.js" defer></script>

  <!-- TPL: INICIO BLOQUE NUEVO [Guardar mínimo y marcar perfil completo] -->
  <script>
    (function(){
      var form = document.getElementById('ownerForm');
      function getNext(){
        try{ return new URLSearchParams(location.search).get('next') || 'perfil.html'; }
        catch(_){ return 'perfil.html'; }
      }
      form.addEventListener('submit', function(e){
        e.preventDefault();
        // Guardamos “mínimos” en localStorage (placeholder hasta Firestore)
        var data = {
          nombre: document.getElementById('nombre').value.trim(),
          telefono: document.getElementById('telefono').value.trim(),
          direccion: document.getElementById('direccion').value.trim(),
          cp: document.getElementById('cp').value.trim(),
          ciudad: document.getElementById('ciudad').value.trim(),
          contacto: document.getElementById('contacto').value,
          zona: document.getElementById('zona').value.trim(),
          referencia: document.getElementById('referencia').value.trim()
        };
        localStorage.setItem('tpl-owner', JSON.stringify(data));
        localStorage.setItem('tpl-profile','1'); // <- bandera perfil completo
        location.href = getNext();
      });
    })();
  </script>
  <!-- TPL: FIN BLOQUE NUEVO -->
</body>
</html>
